/*! lrm-extensions - version 1.0.0 - 2016-10-26 - Copyright 2016 Christian Guyette - Contact: http//www.ouaie.be/ - This  program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or any later version.*/

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(){"use strict";L.Routing.Extensions=L.Routing.Control.extend({_GpxRoute:null,initialize:function(a){L.Util.setOptions(this,a),L.Routing.Control.prototype.initialize.call(this,a),console.log(this.getContainer())},_updateLines:function(a){this._GpxRoute=a.route,!a.route.waypoints&&a.route.actualWaypoints&&(a.route.waypoints=a.route.actualWaypoints),L.Routing.Control.prototype._updateLines.call(this,a),this.fire("gpxchanged")},_toXmlString:function(a){return a.replace("&","&amp;").replace("'","&apos;").replace('"',"&quote;").replace(">","&gt;").replace("<","&lt;")},getGpxString:function(a){void 0===a&&(a=a||{}),void 0===a.GpxXmlDeclaration&&(a.GpxXmlDeclaration=!0),void 0===a.GpxDate&&(a.GpxDate=2),void 0===a.GpxWaypoints&&(a.GpxWaypoints=!0),void 0===a.GpxRoute&&(a.GpxRoute=!0),void 0===a.GpxTrack&&(a.GpxTrack=!0);var b,c="\n",d="\n\t",e="\n\t\t",f="\n\t\t\t";switch(a.GpxDate){case 0:b="";break;case 1:b="time='1970-01-01T00:00:00.000Z' ";break;default:b="time='"+(new Date).toISOString()+"' "}var g="";if(a.GpxXmlDeclaration&&(g="<?xml version='1.0'?>"+c),g+="<gpx xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xsi:schemaLocation='http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd' version='1.1' creator='Leaflet-Routing-Gpx'>",this._GpxRoute){var h=0;if(this._GpxRoute.waypoints&&a.GpxWaypoints)for(h=0;h<this._GpxRoute.waypoints.length;h++)g+=d+"<wpt lat='"+this._GpxRoute.waypoints[h].latLng.lat+"' lon='"+this._GpxRoute.waypoints[h].latLng.lng+"' "+b+"name='"+h+"' />";if(this._GpxRoute.coordinates&&0<this._GpxRoute.coordinates.length){if(a.GpxRoute){if(g+=d+"<rte>",this._GpxRoute.instructions&&0<this._GpxRoute.instructions.length)for(h=0;h<this._GpxRoute.instructions.length;h++)g+=e+"<rtept lat='"+(this._GpxRoute.coordinates[this._GpxRoute.instructions[h].index].lat?this._GpxRoute.coordinates[this._GpxRoute.instructions[h].index].lat:this._GpxRoute.coordinates[this._GpxRoute.instructions[h].index][0])+"' lon='"+(this._GpxRoute.coordinates[this._GpxRoute.instructions[h].index].lng?this._GpxRoute.coordinates[this._GpxRoute.instructions[h].index].lng:this._GpxRoute.coordinates[this._GpxRoute.instructions[h].index][1])+"' "+b+"name='"+h+"' desc='"+this._toXmlString(this._formatter.formatInstruction(this._GpxRoute.instructions[h]))+"' />";g+=d+"</rte>"}if(a.GpxTrack){for(g+=d+"<trk>",g+=e+"<trkseg>",h=0;h<this._GpxRoute.coordinates.length;h++)g+=f+"<trkpt lat='"+(this._GpxRoute.coordinates[h].lat?this._GpxRoute.coordinates[h].lat:this._GpxRoute.coordinates[h][0])+"' lon='"+(this._GpxRoute.coordinates[h].lng?this._GpxRoute.coordinates[h].lng:this._GpxRoute.coordinates[h][1])+"' "+b+"name='"+h+"' />";g+=e+"</trkseg>",g+=d+"</trk>"}}}return g+=c+"</gpx>"},getRouteCoordinates:function(){return this._GpxRoute&&this._GpxRoute.coordinates&&0<this._GpxRoute.coordinates.length&&this._GpxRoute.coordinates[0].lat?JSON.stringify(this._GpxRoute.coordinates):null},getRouteHTMLElement:function(a){a=a||{},a.RouteElement=a.RouteElement||"div",a.RouteHeader=a.RouteHeader||"<h1>Itinéraire:</h1>",a.RouteElementId=a.RouteElementId||"Route",a.RouteSummaryTemplate=a.RouteSummaryTemplate||'<div class="Route-Summary">Distance&nbsp;:&nbsp;{ Distance }&nbsp;-&nbsp;Temps&nbsp;:&nbsp;{ Time }</div>',a.CumDistanceTemplate=a.CumDistanceTemplate||'<div class="Route-CumDistance"> Distance cumulée&nbsp;:&nbsp;{ CumDistance }<div>',a.RouteTextInstructionTemplate=a.RouteTextInstructionTemplate||'<div class="Route-TextInstruction">{TextInstruction}</div>',a.RouteNextDistanceTemplate=a.RouteNextDistanceTemplate||'<div class="Route-PostInstruction">Continuez pendant {NextDistance}</div>',a.RoutePreInstructionTemplate=a.RoutePreInstructionTemplate||'<div class="Route-PreInstruction">{PreInstruction}</div>',a.RoutePostInstructionTemplate=a.RoutePostInstructionTemplate||'<div class="Route-PostInstruction">{PostInstruction}</div>';var b=document.createElement(a.RouteElement);if(b.id=a.RouteElementId,b.innerHTML=a.RouteHeader,this._GpxRoute&&this._GpxRoute.instructions&&0<this._GpxRoute.instructions.length){var c=document.createElement("div");b.appendChild(c),c.outerHTML=L.Util.template(a.RouteSummaryTemplate,{Distance:this._formatter.formatDistance(this._GpxRoute.summary.totalDistance),Time:this._formatter.formatTime(this._GpxRoute.summary.totalTime)});var d=0,e=0;for(d=0;d<this._GpxRoute.instructions.length;d++){if(this._GpxRoute.instructions[d].text){var f=document.createElement("div");if(b.appendChild(f),f.outerHTML=L.Util.template(a.RouteTextInstructionTemplate,{TextInstruction:""+(d+1)+" - "+this._toXmlString(this._GpxRoute.instructions[d].text)}),0<this._GpxRoute.instructions[d].distance){var g=document.createElement("div");b.appendChild(g),g.outerHTML=L.Util.template(a.RouteNextDistanceTemplate,{NextDistance:this._formatter.formatDistance(Math.round(1e3*this._GpxRoute.instructions[d].distance)/1e3)})}}if(this._GpxRoute.instructions[d].verbal_pre_transition_instruction){var h=document.createElement("div");b.appendChild(h),h.outerHTML=L.Util.template(a.RoutePreInstructionTemplate,{PreInstruction:""+(d+1)+" - "+this._toXmlString(this._GpxRoute.instructions[d].verbal_pre_transition_instruction)})}if(this._GpxRoute.instructions[d].verbal_post_transition_instruction){var i=document.createElement("div");b.appendChild(i),i.outerHTML=L.Util.template(a.RoutePostInstructionTemplate,{PostInstruction:this._toXmlString(this._GpxRoute.instructions[d].verbal_post_transition_instruction)})}if(0<e){var j=document.createElement("div");b.appendChild(j),j.outerHTML=L.Util.template(a.CumDistanceTemplate,{CumDistance:this._formatter.formatDistance(Math.round(1e3*e)/1e3)})}e+=this._GpxRoute.instructions[d].distance}}return b}}),L.Routing.extensions=function(a){return new L.Routing.Extensions(a)},"undefined"!=typeof b&&b.exports&&(b.exports=L.Routing.extensions)}()},{}]},{},[1]);